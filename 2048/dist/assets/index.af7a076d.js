!function(A=".",i="__import__"){try{self[i]=new Function("u","return import(u)")}catch(t){const s=new URL(A,location),e=A=>{URL.revokeObjectURL(A.src),A.remove()};self[i]=A=>new Promise(((t,r)=>{const c=new URL(A,s);if(self[i].moduleMap[c])return t(self[i].moduleMap[c]);const h=new Blob([`import * as m from '${c}';`,`${i}.moduleMap['${c}']=m;`],{type:"text/javascript"}),o=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(h),onerror(){r(new Error(`Failed to import: ${A}`)),e(o)},onload(){t(self[i].moduleMap[c]),e(o)}});document.head.appendChild(o)})),self[i].moduleMap={}}}("/2048/dist/assets/");function A(A,i,t=10){return A.beginPath(),A.moveTo(A.x+t,A.y),A.lineTo(A.x+i-t,A.y),A.quadraticCurveTo(A.x+i,A.y,A.x+i,A.y+t),A.lineTo(A.x+i,A.y+i-t),A.quadraticCurveTo(A.x+i,A.y+i,A.x+i-t,A.y+i),A.lineTo(A.x+10,A.y+i),A.quadraticCurveTo(A.x,A.y+i,A.x,A.y+i-t),A.lineTo(A.x,A.y+t),A.quadraticCurveTo(A.x,A.y,A.x+t,A.y),A.fill()}const i=function(A,i){const{x:t,y:s,fillStyle:e}=A;i(A),Object.assign(A,{x:t,y:s,fillStyle:e})};class t{constructor(A,i){this.ctx=A,this.sum=i}render(){const i=this.ctx;i.fillStyle=i.theme.brick[this.sum][0],A(i,i.brickWidth),i.fillStyle=i.theme.brick[this.sum][1],i.textAlign="center",i.textBaseline="middle",i.font=i.brickWidth/2+"px sans-serif",i.fillText(String(this.sum),i.x+i.brickWidth/2,i.y+i.brickWidth/2)}}class s{constructor(A,i){this.ctx=A,this.size=i,this.bricks=new Array(i);for(let t=0;t<i;t++)this.bricks[t]=new Array(i);this.seed()}static from(A){const i=function(A){return A.split(/[\n\r|]/).map((A=>(A.trim(),A.split("").map((A=>Number.isNaN(+A)?null:+A)))))}(A),e=new s(null,i.length);for(let s=0;s<i.length;s++)for(let A=0;A<i[0].length;A++)e.bricks[s][A]=i[s][A]?new t(null,i[s][A]):null;return e}toString(){const A=new Array(this.bricks.length);for(let i=0;i<this.bricks.length;i++)A[i]=new Array(this.bricks.length);for(let i=0;i<this.bricks.length;i++)for(let t=0;t<this.bricks.length;t++)A[i][t]=this.bricks[i][t]&&this.bricks[i][t].sum;return function(A){return A.map((A=>A.map((A=>A||".")).join(""))).join("|")}(A)}seed(){const A=[];for(let i=0;i<this.size;i++)for(let t=0;t<this.size;t++)this.bricks[i][t]||A.push([i,t]);if(A.length){const i=Math.round(Math.random()*A.length*100),[s,e]=A[i%A.length];return this.bricks[s][e]=new t(this.ctx,2**(1+i%2)),!0}return!1}compact(A){let i,t,s=!1;do{switch(t=!1,A){case"up":for(let A=0;A<this.size;A++)for(let s=1;s<this.size;s++)this.bricks[A][s]&&!this.bricks[A][s-1]&&(this.bricks[A][s-1]=this.bricks[A][s],this.bricks[A][s]=null,t=i=!0);if(!s)for(let A=0;A<this.size;A++)for(let e=1;e<this.size;e++)this.bricks[A][e]&&this.bricks[A][e-1]&&this.bricks[A][e].sum===this.bricks[A][e-1].sum&&(this.bricks[A][e-1].sum*=2,this.bricks[A][e]=null,t=i=!0,s=!0);break;case"right":for(let A=this.size-2;A>=0;A--)for(let s=0;s<this.size;s++)this.bricks[A][s]&&!this.bricks[A+1][s]&&(this.bricks[A+1][s]=this.bricks[A][s],this.bricks[A][s]=null,t=i=!0);if(!s)for(let A=this.size-2;A>=0;A--)for(let e=0;e<this.size;e++)this.bricks[A][e]&&this.bricks[A+1][e]&&this.bricks[A][e].sum===this.bricks[A+1][e].sum&&(this.bricks[A+1][e].sum*=2,this.bricks[A][e]=null,t=i=!0,s=!0);break;case"down":for(let A=0;A<this.size;A++)for(let s=this.size-2;s>=0;s--)this.bricks[A][s]&&!this.bricks[A][s+1]&&(this.bricks[A][s+1]=this.bricks[A][s],this.bricks[A][s]=null,t=i=!0);if(!s)for(let A=0;A<this.size;A++)for(let e=this.size-2;e>=0;e--)this.bricks[A][e]&&this.bricks[A][e+1]&&this.bricks[A][e].sum===this.bricks[A][e+1].sum&&(this.bricks[A][e+1].sum*=2,this.bricks[A][e]=null,t=i=!0,s=!0);break;case"left":for(let A=1;A<this.size;A++)for(let s=0;s<this.size;s++)this.bricks[A][s]&&!this.bricks[A-1][s]&&(this.bricks[A-1][s]=this.bricks[A][s],this.bricks[A][s]=null,t=i=!0);if(!s)for(let A=1;A<this.size;A++)for(let e=0;e<this.size;e++)this.bricks[A][e]&&this.bricks[A-1][e]&&this.bricks[A][e].sum===this.bricks[A-1][e].sum&&(this.bricks[A-1][e].sum*=2,this.bricks[A][e]=null,t=i=!0,s=!0)}}while(t);return i}render(){const t=this.ctx;this.ctx.fillStyle=t.theme.gridBackground,A(t,t.gridWidth,20),t.fillStyle=t.theme.brickBackground;for(let s=0;s<this.size;s++)for(let e=0;e<this.size;e++)i(t,(()=>{t.x=t.x+s*t.brickWidth+(s+1)*t.brickMargin,t.y=t.y+e*t.brickWidth+(e+1)*t.brickMargin,A(t,t.brickWidth);const i=this.bricks[s][e];i&&i.render()}))}}var e={gridBackground:"#A59482",brickBackground:"#BFAE9E",brick:{2:["#F1E7DF","#736C5F"],4:["#F1E7DF","#736C5F"],8:["#F1B17E","#FFFFFF"],16:["#F7966A","#FFFFFF"],32:["#F47F67","#FFFFFF"],64:["#F75F4F","#FFFFFF"],128:["#EFD697","#FFFFFF"],256:["#F2CC67","#FFFFFF"],512:["#EBC56F","#FFFFFF"],1024:["#EEC351","#FFFFFF"],2048:["#EEC241","#FFFFFF"],4096:["#EEC241","#FFFFFF"]}};const r=new Audio("data:video/quicktime;base64,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"),c=devicePixelRatio,h=document.getElementById("app"),o=h.getContext("2d");o.theme=e,o.x=0,o.y=0;const{width:l,height:n}=h.getBoundingClientRect();o.width=h.width=l*c,o.height=h.height=n*c,o.gridWidth=Math.floor(.8*Math.min(o.width,o.height));o.brickMargin=o.gridWidth/41,o.brickWidth=9*o.brickMargin;const k=new s(o,4);o.x=(o.width-o.gridWidth)/2,o.y=(o.height-o.gridWidth)/2,i(o,(()=>k.render())),function(A){let i=0,t=0,s=!1;document.addEventListener("touchstart",(A=>{if(1===A.touches.length){s=!0;const e=A.touches[0];i=e.clientX,t=e.clientY}else s=!1})),document.addEventListener("touchend",(e=>{const r=e.changedTouches[0];if(r&&s){const s=r.clientX-i,e=r.clientY-t;Math.abs(s)>10&&Math.abs(s)>Math.abs(e)?A.next(s>0?"right":"left"):Math.abs(e)>10&&Math.abs(s)<Math.abs(e)&&A.next(e>0?"down":"up")}})),document.addEventListener("keyup",(i=>{switch(i.code){case"ArrowUp":A.next("up");break;case"ArrowRight":A.next("right");break;case"ArrowDown":A.next("down");break;case"ArrowLeft":A.next("left")}}))}({next(A){if(k.compact(A)){if(r.play(),!k.seed())throw alert("failed"),Error("exit");k.render()}}});
